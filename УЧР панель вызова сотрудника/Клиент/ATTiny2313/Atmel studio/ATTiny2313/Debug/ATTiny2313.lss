
AVRASM ver. 2.2.7  C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm Wed Jul 14 17:03:37 2021

[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.3.229\avrasm\inc\tn2313adef.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(10): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.3.229\avrasm\inc\tn2313adef.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(11): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\config.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(13): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\vars.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(23): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\interrupts_vector.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(24): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\initialization.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(51): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\interrupts.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(52): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\command_and_state.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(53): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\uart.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(54): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\delay.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(55): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\led.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(56): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\counter.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(57): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\tim0.asm'
[builtin](2): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.3.229\avrasm\inc\tn2313adef.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(10): Including file 'C:/Program Files (x86)\Atmel\Studio\7.0\Packs\atmel\ATtiny_DFP\1.3.229\avrasm\inc\tn2313adef.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(11): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\config.inc'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(13): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\vars.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(23): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\interrupts_vector.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(24): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\initialization.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(51): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\interrupts.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(52): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\command_and_state.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(53): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\uart.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(54): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\delay.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(55): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\led.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(56): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\counter.asm'
C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\main.asm(57): Including file 'C:\Qt\myProg\IOTV\IOTV\src\MK\ATTiny2313\Atmel studio\ATTiny2313\tim0.asm'
                                 
                                 ;
                                 
                                 ;***** Created: 2011-02-09 12:04 ******* Source: ATtiny2313A.xml *********
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "tn2313Adef.inc"
                                 ;* Title             : Register/Bit Definitions for the ATtiny2313A
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATtiny2313A
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _TN2313ADEF_INC_
                                 #define _TN2313ADEF_INC_
                                 
                                 
                                 #pragma partinc 0
                                 
                                 ; ***** SPECIFY DEVICE ***************************************************
                                 .device ATtiny2313A
                                 #pragma AVRPART ADMIN PART_NAME ATtiny2313A
                                 .equ	SIGNATURE_000	= 0x1e
                                 .equ	SIGNATURE_001	= 0x91
                                 .equ	SIGNATURE_002	= 0x0a
                                 
                                 #pragma AVRPART CORE CORE_VERSION V2
                                 #pragma AVRPART CORE NEW_INSTRUCTIONS lpm rd,z+
                                 
                                 
                                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                                 ; NOTE:
                                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                                 ; and cannot be used with IN/OUT instructions
                                 .equ	SREG	= 0x3f
                                 .equ	SPL	= 0x3d
                                 .equ	OCR0B	= 0x3c
                                 .equ	GIMSK	= 0x3b
                                 .equ	EIFR	= 0x3a
                                 .equ	TIMSK	= 0x39
                                 .equ	TIFR	= 0x38
                                 .equ	SPMCSR	= 0x37
                                 .equ	OCR0A	= 0x36
                                 .equ	MCUCR	= 0x35
                                 .equ	MCUSR	= 0x34
                                 .equ	TCCR0B	= 0x33
                                 .equ	TCNT0	= 0x32
                                 .equ	OSCCAL	= 0x31
                                 .equ	TCCR0A	= 0x30
                                 .equ	TCCR1A	= 0x2f
                                 .equ	TCCR1B	= 0x2e
                                 .equ	TCNT1L	= 0x2c
                                 .equ	TCNT1H	= 0x2d
                                 .equ	OCR1AL	= 0x2a
                                 .equ	OCR1AH	= 0x2b
                                 .equ	OCR1BL	= 0x28
                                 .equ	OCR1BH	= 0x29
                                 .equ	CLKPR	= 0x26
                                 .equ	ICR1L	= 0x24
                                 .equ	ICR1H	= 0x25
                                 .equ	GTCCR	= 0x23
                                 .equ	TCCR1C	= 0x22
                                 .equ	WDTCR	= 0x21
                                 .equ	PCMSK0	= 0x20
                                 .equ	EEAR	= 0x1e
                                 .equ	EEDR	= 0x1d
                                 .equ	EECR	= 0x1c
                                 .equ	PORTA	= 0x1b
                                 .equ	DDRA	= 0x1a
                                 .equ	PINA	= 0x19
                                 .equ	PORTB	= 0x18
                                 .equ	DDRB	= 0x17
                                 .equ	PINB	= 0x16
                                 .equ	GPIOR2	= 0x15
                                 .equ	GPIOR1	= 0x14
                                 .equ	GPIOR0	= 0x13
                                 .equ	PORTD	= 0x12
                                 .equ	DDRD	= 0x11
                                 .equ	PIND	= 0x10
                                 .equ	USIDR	= 0x0f
                                 .equ	USISR	= 0x0e
                                 .equ	USICR	= 0x0d
                                 .equ	UDR	= 0x0c
                                 .equ	UCSRA	= 0x0b
                                 .equ	UCSRB	= 0x0a
                                 .equ	UBRRL	= 0x09
                                 .equ	ACSR	= 0x08
                                 .equ	BODCR	= 0x07
                                 .equ	PRR	= 0x06
                                 .equ	PCMSK2	= 0x05
                                 .equ	PCMSK1	= 0x04
                                 .equ	UCSRC	= 0x03
                                 .equ	UBRRH	= 0x02
                                 .equ	DIDR	= 0x01
                                 
                                 
                                 ; ***** BIT DEFINITIONS **************************************************
                                 
                                 ; ***** PORTB ************************
                                 ; PORTB - Port B Data Register
                                 .equ	PORTB0	= 0	; Port B Data Register bit 0
                                 .equ	PB0	= 0	; For compatibility
                                 .equ	PORTB1	= 1	; Port B Data Register bit 1
                                 .equ	PB1	= 1	; For compatibility
                                 .equ	PORTB2	= 2	; Port B Data Register bit 2
                                 .equ	PB2	= 2	; For compatibility
                                 .equ	PORTB3	= 3	; Port B Data Register bit 3
                                 .equ	PB3	= 3	; For compatibility
                                 .equ	PORTB4	= 4	; Port B Data Register bit 4
                                 .equ	PB4	= 4	; For compatibility
                                 .equ	PORTB5	= 5	; Port B Data Register bit 5
                                 .equ	PB5	= 5	; For compatibility
                                 .equ	PORTB6	= 6	; Port B Data Register bit 6
                                 .equ	PB6	= 6	; For compatibility
                                 .equ	PORTB7	= 7	; Port B Data Register bit 7
                                 .equ	PB7	= 7	; For compatibility
                                 
                                 ; DDRB - Port B Data Direction Register
                                 .equ	DDB0	= 0	; Port B Data Direction Register bit 0
                                 .equ	DDB1	= 1	; Port B Data Direction Register bit 1
                                 .equ	DDB2	= 2	; Port B Data Direction Register bit 2
                                 .equ	DDB3	= 3	; Port B Data Direction Register bit 3
                                 .equ	DDB4	= 4	; Port B Data Direction Register bit 4
                                 .equ	DDB5	= 5	; Port B Data Direction Register bit 5
                                 .equ	DDB6	= 6	; Port B Data Direction Register bit 6
                                 .equ	DDB7	= 7	; Port B Data Direction Register bit 7
                                 
                                 ; PINB - Port B Input Pins
                                 .equ	PINB0	= 0	; Port B Input Pins bit 0
                                 .equ	PINB1	= 1	; Port B Input Pins bit 1
                                 .equ	PINB2	= 2	; Port B Input Pins bit 2
                                 .equ	PINB3	= 3	; Port B Input Pins bit 3
                                 .equ	PINB4	= 4	; Port B Input Pins bit 4
                                 .equ	PINB5	= 5	; Port B Input Pins bit 5
                                 .equ	PINB6	= 6	; Port B Input Pins bit 6
                                 .equ	PINB7	= 7	; Port B Input Pins bit 7
                                 
                                 
                                 ; ***** TIMER_COUNTER_0 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	OCIE0A	= 0	; Timer/Counter0 Output Compare Match A Interrupt Enable
                                 .equ	TOIE0	= 1	; Timer/Counter0 Overflow Interrupt Enable
                                 .equ	OCIE0B	= 2	; Timer/Counter0 Output Compare Match B Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	OCF0A	= 0	; Timer/Counter0 Output Compare Flag 0A
                                 .equ	TOV0	= 1	; Timer/Counter0 Overflow Flag
                                 .equ	OCF0B	= 2	; Timer/Counter0 Output Compare Flag 0B
                                 
                                 ; OCR0B - Timer/Counter0 Output Compare Register
                                 .equ	OCR0_0	= 0	; 
                                 .equ	OCR0_1	= 1	; 
                                 .equ	OCR0_2	= 2	; 
                                 .equ	OCR0_3	= 3	; 
                                 .equ	OCR0_4	= 4	; 
                                 .equ	OCR0_5	= 5	; 
                                 .equ	OCR0_6	= 6	; 
                                 .equ	OCR0_7	= 7	; 
                                 
                                 ; OCR0A - Timer/Counter0 Output Compare Register
                                 .equ	OCR0A_0	= 0	; 
                                 .equ	OCR0A_1	= 1	; 
                                 .equ	OCR0A_2	= 2	; 
                                 .equ	OCR0A_3	= 3	; 
                                 .equ	OCR0A_4	= 4	; 
                                 .equ	OCR0A_5	= 5	; 
                                 .equ	OCR0A_6	= 6	; 
                                 .equ	OCR0A_7	= 7	; 
                                 
                                 ; TCCR0A - Timer/Counter  Control Register A
                                 .equ	WGM00	= 0	; Waveform Generation Mode
                                 .equ	WGM01	= 1	; Waveform Generation Mode
                                 .equ	COM0B0	= 4	; Compare Match Output B Mode
                                 .equ	COM0B1	= 5	; Compare Match Output B Mode
                                 .equ	COM0A0	= 6	; Compare Match Output A Mode
                                 .equ	COM0A1	= 7	; Compare Match Output A Mode
                                 
                                 ; TCNT0 - Timer/Counter0
                                 .equ	TCNT0_0	= 0	; 
                                 .equ	TCNT0_1	= 1	; 
                                 .equ	TCNT0_2	= 2	; 
                                 .equ	TCNT0_3	= 3	; 
                                 .equ	TCNT0_4	= 4	; 
                                 .equ	TCNT0_5	= 5	; 
                                 .equ	TCNT0_6	= 6	; 
                                 .equ	TCNT0_7	= 7	; 
                                 
                                 ; TCCR0B - Timer/Counter Control Register B
                                 .equ	TCCR0	= TCCR0B	; For compatibility
                                 .equ	CS00	= 0	; Clock Select
                                 .equ	CS01	= 1	; Clock Select
                                 .equ	CS02	= 2	; Clock Select
                                 .equ	WGM02	= 3	; 
                                 .equ	FOC0B	= 6	; Force Output Compare B
                                 .equ	FOC0A	= 7	; Force Output Compare B
                                 
                                 
                                 ; ***** TIMER_COUNTER_1 **************
                                 ; TIMSK - Timer/Counter Interrupt Mask Register
                                 .equ	ICIE1	= 3	; Timer/Counter1 Input Capture Interrupt Enable
                                 .equ	TICIE	= ICIE1	; For compatibility
                                 .equ	OCIE1B	= 5	; Timer/Counter1 Output CompareB Match Interrupt Enable
                                 .equ	OCIE1A	= 6	; Timer/Counter1 Output CompareA Match Interrupt Enable
                                 .equ	TOIE1	= 7	; Timer/Counter1 Overflow Interrupt Enable
                                 
                                 ; TIFR - Timer/Counter Interrupt Flag register
                                 .equ	ICF1	= 3	; Input Capture Flag 1
                                 .equ	OCF1B	= 5	; Output Compare Flag 1B
                                 .equ	OCF1A	= 6	; Output Compare Flag 1A
                                 .equ	TOV1	= 7	; Timer/Counter1 Overflow Flag
                                 
                                 ; TCCR1A - Timer/Counter1 Control Register A
                                 .equ	WGM10	= 0	; Pulse Width Modulator Select Bit 0
                                 .equ	PWM10	= WGM10	; For compatibility
                                 .equ	WGM11	= 1	; Pulse Width Modulator Select Bit 1
                                 .equ	PWM11	= WGM11	; For compatibility
                                 .equ	COM1B0	= 4	; Comparet Ouput Mode 1B, bit 0
                                 .equ	COM1B1	= 5	; Compare Output Mode 1B, bit 1
                                 .equ	COM1A0	= 6	; Comparet Ouput Mode 1A, bit 0
                                 .equ	COM1A1	= 7	; Compare Output Mode 1A, bit 1
                                 
                                 ; TCCR1B - Timer/Counter1 Control Register B
                                 .equ	CS10	= 0	; Clock Select bit 0
                                 .equ	CS11	= 1	; Clock Select 1 bit 1
                                 .equ	CS12	= 2	; Clock Select1 bit 2
                                 .equ	WGM12	= 3	; Waveform Generation Mode Bit 2
                                 .equ	CTC1	= WGM12	; For compatibility
                                 .equ	WGM13	= 4	; Waveform Generation Mode Bit 3
                                 .equ	ICES1	= 6	; Input Capture 1 Edge Select
                                 .equ	ICNC1	= 7	; Input Capture 1 Noise Canceler
                                 
                                 ; TCCR1C - Timer/Counter1 Control Register C
                                 .equ	FOC1B	= 6	; Force Output Compare for Channel B
                                 .equ	FOC1A	= 7	; Force Output Compare for Channel A
                                 
                                 
                                 ; ***** WATCHDOG *********************
                                 ; WDTCR - Watchdog Timer Control Register
                                 .equ	WDTCSR	= WDTCR	; For compatibility
                                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                                 .equ	WDE	= 3	; Watch Dog Enable
                                 .equ	WDCE	= 4	; Watchdog Change Enable
                                 .equ	WDTOE	= WDCE	; For compatibility
                                 .equ	WDP3	= 5	; Watchdog Timer Prescaler Bit 3
                                 .equ	WDIE	= 6	; Watchdog Timeout Interrupt Enable
                                 .equ	WDIF	= 7	; Watchdog Timeout Interrupt Flag
                                 
                                 
                                 ; ***** USART ************************
                                 ; UDR - USART I/O Data Register
                                 .equ	UDR0	= 0	; USART I/O Data Register bit 0
                                 .equ	UDR1	= 1	; USART I/O Data Register bit 1
                                 .equ	UDR2	= 2	; USART I/O Data Register bit 2
                                 .equ	UDR3	= 3	; USART I/O Data Register bit 3
                                 .equ	UDR4	= 4	; USART I/O Data Register bit 4
                                 .equ	UDR5	= 5	; USART I/O Data Register bit 5
                                 .equ	UDR6	= 6	; USART I/O Data Register bit 6
                                 .equ	UDR7	= 7	; USART I/O Data Register bit 7
                                 
                                 ; UCSRA - USART Control and Status Register A
                                 .equ	USR	= UCSRA	; For compatibility
                                 .equ	MPCM	= 0	; Multi-processor Communication Mode
                                 .equ	U2X	= 1	; Double the USART Transmission Speed
                                 .equ	UPE	= 2	; USART Parity Error
                                 .equ	PE	= UPE	; For compatibility
                                 .equ	DOR	= 3	; Data overRun
                                 .equ	FE	= 4	; Framing Error
                                 .equ	UDRE	= 5	; USART Data Register Empty
                                 .equ	TXC	= 6	; USART Transmitt Complete
                                 .equ	RXC	= 7	; USART Receive Complete
                                 
                                 ; UCSRB - USART Control and Status Register B
                                 .equ	UCR	= UCSRB	; For compatibility
                                 .equ	TXB8	= 0	; Transmit Data Bit 8
                                 .equ	RXB8	= 1	; Receive Data Bit 8
                                 .equ	UCSZ2	= 2	; Character Size
                                 .equ	CHR9	= UCSZ2	; For compatibility
                                 .equ	TXEN	= 3	; Transmitter Enable
                                 .equ	RXEN	= 4	; Receiver Enable
                                 .equ	UDRIE	= 5	; USART Data register Empty Interrupt Enable
                                 .equ	TXCIE	= 6	; TX Complete Interrupt Enable
                                 .equ	RXCIE	= 7	; RX Complete Interrupt Enable
                                 
                                 ; UCSRC - USART Control and Status Register C
                                 .equ	UCPOL	= 0	; Clock Polarity
                                 .equ	UCSZ0	= 1	; Character Size Bit 0
                                 .equ	UCSZ1	= 2	; Character Size Bit 1
                                 .equ	USBS	= 3	; Stop Bit Select
                                 .equ	UPM0	= 4	; Parity Mode Bit 0
                                 .equ	UPM1	= 5	; Parity Mode Bit 1
                                 .equ	UMSEL0 	= 6	; USART Mode Select 0
                                 .equ 	UMSEL1 	= 7 ; USART Mode Select 1
                                 .equ 	UCPHA  	= 1 ; USART MSPIM Clock Phase
                                 .equ 	UDORD  	= 2 ; USART MSPIM Data Order 
                                 
                                 .equ	UBRR	= UBRRL	; For compatibility
                                 
                                 ; ***** ANALOG_COMPARATOR ************
                                 ; ACSR - Analog Comparator Control And Status Register
                                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                                 .equ	ACIC	= 2	; 
                                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                                 .equ	ACO	= 5	; Analog Compare Output
                                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                                 .equ	ACD	= 7	; Analog Comparator Disable
                                 
                                 ; DIDR - Digital Input Disable Register 1
                                 .equ	AIN0D	= 0	; AIN0 Digital Input Disable
                                 .equ	AIN1D	= 1	; AIN1 Digital Input Disable
                                 
                                 
                                 ; ***** PORTD ************************
                                 ; PORTD - Data Register, Port D
                                 .equ	PORTD0	= 0	; 
                                 .equ	PD0	= 0	; For compatibility
                                 .equ	PORTD1	= 1	; 
                                 .equ	PD1	= 1	; For compatibility
                                 .equ	PORTD2	= 2	; 
                                 .equ	PD2	= 2	; For compatibility
                                 .equ	PORTD3	= 3	; 
                                 .equ	PD3	= 3	; For compatibility
                                 .equ	PORTD4	= 4	; 
                                 .equ	PD4	= 4	; For compatibility
                                 .equ	PORTD5	= 5	; 
                                 .equ	PD5	= 5	; For compatibility
                                 .equ	PORTD6	= 6	; 
                                 .equ	PD6	= 6	; For compatibility
                                 
                                 ; DDRD - Data Direction Register, Port D
                                 .equ	DDD0	= 0	; 
                                 .equ	DDD1	= 1	; 
                                 .equ	DDD2	= 2	; 
                                 .equ	DDD3	= 3	; 
                                 .equ	DDD4	= 4	; 
                                 .equ	DDD5	= 5	; 
                                 .equ	DDD6	= 6	; 
                                 
                                 ; PIND - Input Pins, Port D
                                 .equ	PIND0	= 0	; 
                                 .equ	PIND1	= 1	; 
                                 .equ	PIND2	= 2	; 
                                 .equ	PIND3	= 3	; 
                                 .equ	PIND4	= 4	; 
                                 .equ	PIND5	= 5	; 
                                 .equ	PIND6	= 6	; 
                                 
                                 
                                 ; ***** EEPROM ***********************
                                 ; EEAR - EEPROM Read/Write Access
                                 .equ	EEARL	= EEAR	; For compatibility
                                 .equ	EEAR0	= 0	; EEPROM Read/Write Access bit 0
                                 .equ	EEAR1	= 1	; EEPROM Read/Write Access bit 1
                                 .equ	EEAR2	= 2	; EEPROM Read/Write Access bit 2
                                 .equ	EEAR3	= 3	; EEPROM Read/Write Access bit 3
                                 .equ	EEAR4	= 4	; EEPROM Read/Write Access bit 4
                                 .equ	EEAR5	= 5	; EEPROM Read/Write Access bit 5
                                 .equ	EEAR6	= 6	; EEPROM Read/Write Access bit 6
                                 
                                 ; EEDR - EEPROM Data Register
                                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                                 
                                 ; EECR - EEPROM Control Register
                                 .equ	EERE	= 0	; EEPROM Read Enable
                                 .equ	EEPE	= 1	; EEPROM Write Enable
                                 .equ	EEWE	= EEPE	; For compatibility
                                 .equ	EEMPE	= 2	; EEPROM Master Write Enable
                                 .equ	EEMWE	= EEMPE	; For compatibility
                                 .equ	EERIE	= 3	; EEProm Ready Interrupt Enable
                                 .equ	EEPM0	= 4	; 
                                 .equ	EEPM1	= 5	; 
                                 
                                 
                                 ; ***** PORTA ************************
                                 ; PORTA - Port A Data Register
                                 .equ	PORTA0	= 0	; Port A Data Register bit 0
                                 .equ	PA0	= 0	; For compatibility
                                 .equ	PORTA1	= 1	; Port A Data Register bit 1
                                 .equ	PA1	= 1	; For compatibility
                                 .equ	PORTA2	= 2	; Port A Data Register bit 2
                                 .equ	PA2	= 2	; For compatibility
                                 
                                 ; DDRA - Port A Data Direction Register
                                 .equ	DDA0	= 0	; Data Direction Register, Port A, bit 0
                                 .equ	DDA1	= 1	; Data Direction Register, Port A, bit 1
                                 .equ	DDA2	= 2	; Data Direction Register, Port A, bit 2
                                 
                                 ; PINA - Port A Input Pins
                                 .equ	PINA0	= 0	; Input Pins, Port A bit 0
                                 .equ	PINA1	= 1	; Input Pins, Port A bit 1
                                 .equ	PINA2	= 2	; Input Pins, Port A bit 2
                                 
                                 
                                 ; ***** USI **************************
                                 ; USIDR - USI Data Register
                                 .equ	USIDR0	= 0	; USI Data Register bit 0
                                 .equ	USIDR1	= 1	; USI Data Register bit 1
                                 .equ	USIDR2	= 2	; USI Data Register bit 2
                                 .equ	USIDR3	= 3	; USI Data Register bit 3
                                 .equ	USIDR4	= 4	; USI Data Register bit 4
                                 .equ	USIDR5	= 5	; USI Data Register bit 5
                                 .equ	USIDR6	= 6	; USI Data Register bit 6
                                 .equ	USIDR7	= 7	; USI Data Register bit 7
                                 
                                 ; USISR - USI Status Register
                                 .equ	USICNT0	= 0	; USI Counter Value Bit 0
                                 .equ	USICNT1	= 1	; USI Counter Value Bit 1
                                 .equ	USICNT2	= 2	; USI Counter Value Bit 2
                                 .equ	USICNT3	= 3	; USI Counter Value Bit 3
                                 .equ	USIDC	= 4	; Data Output Collision
                                 .equ	USIPF	= 5	; Stop Condition Flag
                                 .equ	USIOIF	= 6	; Counter Overflow Interrupt Flag
                                 .equ	USISIF	= 7	; Start Condition Interrupt Flag
                                 
                                 ; USICR - USI Control Register
                                 .equ	USITC	= 0	; Toggle Clock Port Pin
                                 .equ	USICLK	= 1	; Clock Strobe
                                 .equ	USICS0	= 2	; USI Clock Source Select Bit 0
                                 .equ	USICS1	= 3	; USI Clock Source Select Bit 1
                                 .equ	USIWM0	= 4	; USI Wire Mode Bit 0
                                 .equ	USIWM1	= 5	; USI Wire Mode Bit 1
                                 .equ	USIOIE	= 6	; Counter Overflow Interrupt Enable
                                 .equ	USISIE	= 7	; Start Condition Interrupt Enable
                                 
                                 
                                 ; ***** EXTERNAL_INTERRUPT ***********
                                 ; GIMSK - General Interrupt Mask Register
                                 .equ  PCIE1 = 3 ;
                                 .equ  PCIE2 = 4 ;
                                 .equ	PCIE0	= 5	; 
                                 .equ	INT0	= 6	; External Interrupt Request 0 Enable
                                 .equ	INT1	= 7	; External Interrupt Request 1 Enable
                                 
                                 ; EIFR - Extended Interrupt Flag Register
                                 .equ	GIFR	= EIFR	; For compatibility
                                 .equ	PCIF0	= 5	; 
                                 .equ  PCIF2	= 4   ;
                                 .equ  PCIF1   = 3   ;
                                 .equ	INTF0	= 6	; External Interrupt Flag 0
                                 .equ	INTF1	= 7	; External Interrupt Flag 1
                                 
                                 ; PCMSK2 - Pin Change Interrupt Mask Register 2
                                 .equ	PCINT11	= 0	; Pin Change Interrupt Mask 11
                                 .equ	PCINT12	= 1	; Pin Change Interrupt Mask 12
                                 .equ	PCINT13	= 2	; Pin Change Interrupt Mask 13
                                 .equ	PCINT14	= 3	; Pin Change Interrupt Mask 14
                                 .equ	PCINT15	= 4	; Pin Change Interrupt Mask 15
                                 .equ	PCINT16	= 5	; Pin Change Interrupt Mask 16
                                 .equ	PCINT17	= 6	; Pin Change Interrupt Mask 17
                                 
                                 ; PCMSK1 - Pin Change Interrupt Mask Register 1
                                 .equ	PCINT8	= 0	; Pin Change Interrupt Mask 8
                                 .equ	PCINT9	= 1	; Pin Change Interrupt Mask 9
                                 .equ	PCINT10	= 2	; Pin Change Interrupt Mask 10
                                 
                                 
                                 ; ***** CPU **************************
                                 ; SREG - Status Register
                                 .equ	SREG_C	= 0	; Carry Flag
                                 .equ	SREG_Z	= 1	; Zero Flag
                                 .equ	SREG_N	= 2	; Negative Flag
                                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                                 .equ	SREG_S	= 4	; Sign Bit
                                 .equ	SREG_H	= 5	; Half Carry Flag
                                 .equ	SREG_T	= 6	; Bit Copy Storage
                                 .equ	SREG_I	= 7	; Global Interrupt Enable
                                 
                                 ; SPMCSR - Store Program Memory Control and Status register
                                 .equ	SPMEN	= 0	; Store Program Memory Enable
                                 .equ	PGERS	= 1	; Page Erase
                                 .equ	PGWRT	= 2	; Page Write
                                 .equ	RFLB	= 3	; Read Fuse and Lock Bits
                                 .equ	CTPB	= 4	; Clear Temporary Page Buffer
                                 
                                 ; MCUCR - MCU Control Register
                                 .equ	ISC00	= 0	; Interrupt Sense Control 0 bit 0
                                 .equ	ISC01	= 1	; Interrupt Sense Control 0 bit 1
                                 .equ	ISC10	= 2	; Interrupt Sense Control 1 bit 0
                                 .equ	ISC11	= 3	; Interrupt Sense Control 1 bit 1
                                 .equ	SM0	= 4	; Sleep Mode Select Bit 0
                                 .equ	SM	= SM0	; For compatibility
                                 .equ	SE	= 5	; Sleep Enable
                                 .equ	SM1	= 6	; Sleep Mode Select Bit 1
                                 .equ	PUD	= 7	; Pull-up Disable
                                 
                                 ; CLKPR - Clock Prescale Register
                                 .equ	CLKPS0	= 0	; Clock Prescaler Select Bit 0
                                 .equ	CLKPS1	= 1	; Clock Prescaler Select Bit 1
                                 .equ	CLKPS2	= 2	; Clock Prescaler Select Bit 2
                                 .equ	CLKPS3	= 3	; Clock Prescaler Select Bit 3
                                 .equ	CLKPCE	= 7	; Clock Prescaler Change Enable
                                 
                                 ; MCUSR - MCU Status register
                                 .equ	PORF	= 0	; Power-On Reset Flag
                                 .equ	EXTRF	= 1	; External Reset Flag
                                 .equ	BORF	= 2	; Brown-out Reset Flag
                                 .equ	WDRF	= 3	; Watchdog Reset Flag
                                 
                                 ; OSCCAL - Oscillator Calibration Register
                                 .equ	CAL0	= 0	; Oscillatro Calibration Value Bit 0
                                 .equ	CAL1	= 1	; Oscillatro Calibration Value Bit 1
                                 .equ	CAL2	= 2	; Oscillatro Calibration Value Bit 2
                                 .equ	CAL3	= 3	; Oscillatro Calibration Value Bit 3
                                 .equ	CAL4	= 4	; Oscillatro Calibration Value Bit 4
                                 .equ	CAL5	= 5	; Oscillatro Calibration Value Bit 5
                                 .equ	CAL6	= 6	; Oscillatro Calibration Value Bit 6
                                 
                                 ; GTCCR - General Timer Counter Control Register
                                 .equ	SFIOR	= GTCCR	; For compatibility
                                 .equ	PSR10	= 0	; 
                                 
                                 ; PCMSK - Pin-Change Mask register
                                 .equ	PCINT0	= 0	; Pin-Change Interrupt 0
                                 .equ	PCINT1	= 1	; Pin-Change Interrupt 1
                                 .equ	PCINT2	= 2	; Pin-Change Interrupt 2
                                 .equ	PCINT3	= 3	; Pin-Change Interrupt 3
                                 .equ	PCINT4	= 4	; Pin-Change Interrupt 4
                                 .equ	PCINT5	= 5	; Pin-Change Interrupt 5
                                 .equ	PCINT6	= 6	; Pin-Change Interrupt 6
                                 .equ	PCINT7	= 7	; Pin-Change Interrupt 7
                                 
                                 ; GPIOR2 - General Purpose I/O Register 2
                                 .equ	GPIOR20	= 0	; General Purpose I/O Register 2 bit 0
                                 .equ	GPIOR21	= 1	; General Purpose I/O Register 2 bit 1
                                 .equ	GPIOR22	= 2	; General Purpose I/O Register 2 bit 2
                                 .equ	GPIOR23	= 3	; General Purpose I/O Register 2 bit 3
                                 .equ	GPIOR24	= 4	; General Purpose I/O Register 2 bit 4
                                 .equ	GPIOR25	= 5	; General Purpose I/O Register 2 bit 5
                                 .equ	GPIOR26	= 6	; General Purpose I/O Register 2 bit 6
                                 .equ	GPIOR27	= 7	; General Purpose I/O Register 2 bit 7
                                 
                                 ; GPIOR1 - General Purpose I/O Register 1
                                 .equ	GPIOR10	= 0	; General Purpose I/O Register 1 bit 0
                                 .equ	GPIOR11	= 1	; General Purpose I/O Register 1 bit 1
                                 .equ	GPIOR12	= 2	; General Purpose I/O Register 1 bit 2
                                 .equ	GPIOR13	= 3	; General Purpose I/O Register 1 bit 3
                                 .equ	GPIOR14	= 4	; General Purpose I/O Register 1 bit 4
                                 .equ	GPIOR15	= 5	; General Purpose I/O Register 1 bit 5
                                 .equ	GPIOR16	= 6	; General Purpose I/O Register 1 bit 6
                                 .equ	GPIOR17	= 7	; General Purpose I/O Register 1 bit 7
                                 
                                 ; GPIOR0 - General Purpose I/O Register 0
                                 .equ	GPIOR00	= 0	; General Purpose I/O Register 0 bit 0
                                 .equ	GPIOR01	= 1	; General Purpose I/O Register 0 bit 1
                                 .equ	GPIOR02	= 2	; General Purpose I/O Register 0 bit 2
                                 .equ	GPIOR03	= 3	; General Purpose I/O Register 0 bit 3
                                 .equ	GPIOR04	= 4	; General Purpose I/O Register 0 bit 4
                                 .equ	GPIOR05	= 5	; General Purpose I/O Register 0 bit 5
                                 .equ	GPIOR06	= 6	; General Purpose I/O Register 0 bit 6
                                 .equ	GPIOR07	= 7	; General Purpose I/O Register 0 bit 7
                                 
                                 ; PRR - Power reduction register
                                 .equ	PRUSART	= 0	; 
                                 .equ	PRUSI	= 1	; 
                                 .equ	PRTIM0	= 2	; 
                                 .equ	PRTIM1	= 3	; 
                                 
                                 ; BODCR - BOD control register
                                 .equ	BPDSE	= 0	; 
                                 .equ	BPDS	= 1	; 
                                 
                                 
                                 
                                 ; ***** LOCKSBITS ********************************************************
                                 .equ	LB1	= 0	; Lockbit
                                 .equ	LB2	= 1	; Lockbit
                                 
                                 
                                 ; ***** FUSES ************************************************************
                                 ; LOW fuse bits
                                 .equ	CKSEL0	= 0	; Select Clock Source
                                 .equ	CKSEL1	= 1	; Select Clock Source
                                 .equ	CKSEL2	= 2	; Select Clock Source
                                 .equ	CKSEL3	= 3	; Select Clock Source
                                 .equ	SUT0	= 4	; Select start-up time
                                 .equ	SUT1	= 5	; Select start-up time
                                 .equ	CKOUT	= 6	; Clock output
                                 .equ	CKDIV8	= 7	; Divide clock by 8
                                 
                                 ; HIGH fuse bits
                                 .equ	BODLEVEL0	= 0	; Brown-out Detector trigger level
                                 .equ	BODLEVEL1	= 1	; Brown-out Detector trigger level
                                 .equ	BODLEVEL2	= 2	; Brown-out Detector trigger level
                                 .equ	EESAVE	= 3	; EEPROM memory is preserved through chip erase
                                 .equ	WDTON	= 4	; Watchdog Timer Always On
                                 .equ	SPIEN	= 5	; Enable Serial programming and Data Downloading
                                 .equ	DWEN	= 6	; debugWIRE Enable
                                 .equ	RSTDISBL	= 7	; External reset disable
                                 
                                 ; EXTENDED fuse bits
                                 .equ	SELFPRGEN	= 0	; Self Programming Enable
                                 
                                 
                                 
                                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                                 .def	XH	= r27
                                 .def	XL	= r26
                                 .def	YH	= r29
                                 .def	YL	= r28
                                 .def	ZH	= r31
                                 .def	ZL	= r30
                                 
                                 
                                 
                                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                                 .equ	FLASHEND	= 0x03ff	; Note: Word address
                                 .equ	IOEND	= 0x003f
                                 .equ	SRAM_START	= 0x0060
                                 .equ	SRAM_SIZE	= 128
                                 .equ	RAMEND	= 0x00df
                                 .equ	XRAMEND	= 0x0000
                                 .equ	E2END	= 0x007f
                                 .equ	EEPROMEND	= 0x007f
                                 .equ	EEADRBITS	= 7
                                 #pragma AVRPART MEMORY PROG_FLASH 2048
                                 #pragma AVRPART MEMORY EEPROM 128
                                 #pragma AVRPART MEMORY INT_SRAM SIZE 128
                                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                                 
                                 
                                 
                                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                                 .equ	NRWW_START_ADDR	= 0x0
                                 .equ	NRWW_STOP_ADDR	= 0x3ff
                                 .equ	RWW_START_ADDR	= 0x0
                                 .equ	RWW_STOP_ADDR	= 0x0
                                 .equ	PAGESIZE	= 16
                                 
                                 
                                 
                                 ; ***** INTERRUPT VECTORS ************************************************
                                 .equ	INT0addr	= 0x0001	; External Interrupt Request 0
                                 .equ	INT1addr	= 0x0002	; External Interrupt Request 1
                                 .equ	ICP1addr	= 0x0003	; Timer/Counter1 Capture Event
                                 .equ	OC1Aaddr	= 0x0004	; Timer/Counter1 Compare Match A
                                 .equ	OC1addr	= 0x0004	; For compatibility
                                 .equ	OVF1addr	= 0x0005	; Timer/Counter1 Overflow
                                 .equ	OVF0addr	= 0x0006	; Timer/Counter0 Overflow
                                 .equ	URXCaddr	= 0x0007	; USART, Rx Complete
                                 .equ	URXC0addr	= 0x0007	; For compatibility
                                 .equ	UDREaddr	= 0x0008	; USART Data Register Empty
                                 .equ	UDRE0addr	= 0x0008	; For compatibility
                                 .equ	UTXCaddr	= 0x0009	; USART, Tx Complete
                                 .equ	UTXC0addr	= 0x0009	; For compatibility
                                 .equ	ACIaddr	= 0x000a	; Analog Comparator
                                 .equ	PCIBaddr	= 0x000b	; Pin Change Interrupt Request B
                                 .equ	PCIaddr	= 0x000b	; For compatibility
                                 .equ	OC1Baddr	= 0x000c	; 
                                 .equ	OC0Aaddr	= 0x000d	; 
                                 .equ	OC0Baddr	= 0x000e	; 
                                 .equ	USI_STARTaddr	= 0x000f	; USI Start Condition
                                 .equ	USI_OVFaddr	= 0x0010	; USI Overflow
                                 .equ	ERDYaddr	= 0x0011	; 
                                 .equ	WDTaddr	= 0x0012	; Watchdog Timer Overflow
                                 .equ	PCIAaddr	= 0x0013	; Pin Change Interrupt Request A
                                 .equ	PCIDaddr	= 0x0014	; Pin Change Interrupt Request D
                                 
                                 .equ	INT_VECTORS_SIZE	= 21	; size in words
                                 
                                 #endif  /* _TN2313ADEF_INC_ */
                                 
                                 ; ***** END OF FILE ******************************************************
                                 
                                 ; attiny2313_tm1637.asm
                                 ;
                                 ; Created: 09.07.2021 14:09:01
                                 ; Author : verbkinm
                                 ;
                                 ; :	
                                 ;	
                                 
                                 .include "tn2313adef.inc"
                                 
                                 ;***** Created: 2011-02-09 12:04 ******* Source: ATtiny2313A.xml *********
                                 ;*************************************************************************
                                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                                 ;* 
                                 ;* Number            : AVR000
                                 ;* File Name         : "tn2313Adef.inc"
                                 ;* Title             : Register/Bit Definitions for the ATtiny2313A
                                 ;* Date              : 2011-02-09
                                 ;* Version           : 2.35
                                 ;* Support E-mail    : avr@atmel.com
                                 ;* Target MCU        : ATtiny2313A
                                 ;* 
                                 ;* DESCRIPTION
                                 ;* When including this file in the assembly program file, all I/O register 
                                 ;* names and I/O register bit names appearing in the data book can be used.
                                 ;* In addition, the six registers forming the three data pointers X, Y and 
                                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                                 ;* SRAM is also defined 
                                 ;* 
                                 ;* The Register names are represented by their hexadecimal address.
                                 ;* 
                                 ;* The Register Bit names are represented by their bit number (0-7).
                                 ;* 
                                 ;* Please observe the difference in using the bit names with instructions
                                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                                 ;* (skip if bit in register set/cleared). The following example illustrates
                                 ;* this:
                                 ;* 
                                 ;* in    r16,PORTB             ;read PORTB latch
                                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                                 ;* out   PORTB,r16             ;output to PORTB
                                 ;* 
                                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                                 ;* rjmp  TOV0_is_set           ;jump if set
                                 ;* ...                         ;otherwise do something else
                                 ;*************************************************************************
                                 
                                 #ifndef _TN2313ADEF_INC_
                                 #endif  /* _TN2313ADEF_INC_ */
                                 
                                 ; ***** END OF FILE ******************************************************
                                 .include "config.inc"
                                 
                                 
                                 .equ 	XTAL = 1000000
                                 .equ 	baudrate = 4800
                                 .equ 	bauddivider = XTAL / (16 * baudrate) - 1
                                 
                                 ;-------------------------   
                                 
                                 .equ	kdel1			= 487		; (0,5 .  16-   1)
                                 .equ	kdel2			= 58593		; (60 .  16-   1)
                                 .equ	kdel3			= 233		; (240   8-   1)
                                 .equ	kdel4			= 125		; (1000   8-   1)
                                 
                                 
                                 ;------------------------- 
                                 
                                 .equ	PORT_LED_0		= PORTB
                                 .equ	DDR_LED_0		= DDRB
                                 .equ	PIN_LED_0		= PINB
                                 
                                 .equ	RED_LED_0		= PB5
                                 .equ	GREEN_LED_0		= PB6
                                 .equ	BLUE_LED_0		= PB7
                                 
                                 ;------------------------- /  
                                 
                                 .equ	PORT_BUZZER		= PORTB
                                 .equ	DDR_BUZZER		= DDRB
                                 .equ	PIN_BUZZER		= PINB
                                 .equ	BUZZER			= PB2
                                 
                                 ;------------------------- /    
                                 
                                 .equ	PORT_BUTTON		= PORTD
                                 .equ	DDR_BUTTON		= DDRD
                                 .equ	PIN_BUTTON		= PIND
                                 .equ	BUTTON			= PD2
                                 
                                 .include "vars.asm"
                                 
                                 ;			 
                                 ;========================================================
                                 
                                 ;-------------------------  
                                 
                                 .equ	OUR_ADDR		= 0x11
                                 .equ	SERVER_ADDR		= 0x10
                                 
                                 ;-------------------------  
                                 
                                 .equ	CMD_PING				= 0x01
                                 .equ	CMD_QUERY				= 0x02
                                 .equ	CMD_CANCEL_QUERY		= 0x03
                                 .equ	CMD_RESPONSE_TO_QUERY	= 0x04
                                 
                                 ;-------------------------   CONN_STATE ()
                                 
                                 .equ	DISCONNECTED			= 0x00
                                 .equ	CONNECTED				= 0x01
                                 
                                 ;-------------------------   STATE
                                 
                                 .equ	STATE_OK				= 0x00		;  				
                                 .equ	STATE_WAITING_RESPONSE	= 0x01		;   		
                                 .equ	STATE_WAITING_US		= 0x02		;    	
                                 .equ	STATE_RECEIVED_RESPONSE	= 0x03		;  				
                                 .equ	STATE_ERROR				= 0x04		; 					
                                 
                                 ;========================================================
                                 ;			   
                                 ;========================================================
                                 
                                 .def	CONST_ZERO		= r0				;  
                                 .def	SRC_ADDR		= r1				;  .
                                 .def	DST_ADDR		= r2				;  
                                 .def	DATA			= r3				;   
                                 .def	counter_CONN_STATE = r4				;    CONN_STATE.    10 .
                                 .def	counter_BLINK_TIME = r5				;      STATE_RECEIVED_RESPONSE.
                                 .def	counter_PING	= r6				;    .    5 .
                                 
                                 .def	STATE			= r20				;  .   == 0,   == 1,     == 2,   == 3,  == 4
                                 .def	CONN_STATE		= r21				;  .    == 0,   == 1
                                 .def	BYTE			= r22				;  \  
                                 
                                 ;========================================================
                                 ;			   EEPROM
                                 ;========================================================
                                 
                                 .eseg										;   EEPROM
                                 	.org	0x00							;    
                                 
                                 ;-------------------------      
                                 
                                 ;========================================================
                                 ;				   RAM
                                 ;========================================================
                                 
                                 .dseg										;   RAM
                                 	.org	0x60							;    
                                 
                                 
                                 ;========================================================
                                 ;			   
                                 ;========================================================
                                 
                                 .cseg		 						;    
                                 	.org	0						;     
                                 
                                 start:	
                                 	.include "interrupts_vector.asm"
                                 
                                 ;				  
                                 ;========================================================		
                                 
000000 c014                      	rjmp	init	;    
000001 c048                      	rjmp	_INT0	;   0
000002 9518                      	reti			;   1
000003 9518                      	reti			;     T1
000004 c083                      	rjmp	_TIM1_A ;    T1 A
000005 9518                      	reti			;    T1
000006 9518                      	reti			;    T0
000007 c05e                      	rjmp	_UART_RX;  UART  
000008 9518                      	reti			;  UART   
000009 9518                      	reti			;  UART  
00000a 9518                      	reti			;   
00000b 9518                      	reti			;      
00000c 9518                      	reti			; / 1.  B 
00000d 9518                      	reti			; / 0.  A
00000e 9518                      	reti			; / 0.  B 
00000f 9518                      	reti			; USI  
000010 9518                      	reti			; USI 
000011 9518                      	reti			; EEPROM 
000012 9518                      	reti			;   
000013 9518                      	reti			; PCINT1 Handler
                                 	.include "initialization.asm"
000014 9518                      
                                 ;				  
                                 ;========================================================
                                 
                                 init:
                                 	;--------------------------  
                                 	
000015 ed1f                      	ldi		r17, RAMEND			;     
000016 bf1d                      	out		SPL, r17			;     
                                 
                                 	;---------------------------  
                                 
000017 e810                      	ldi 	r17, 0x80			;  
000018 b918                      	out		ACSR, r17
                                 
                                 	;--------------------------   .
                                 
000019 e810                      	ldi		r17, 0x80		    ; 
00001a bd16                      	out		CLKPR, r17			; 
00001b e013                      	ldi		r17, 0x03			;  3   r17
00001c bd16                      	out		CLKPR, r17			;     CLKPR, ,      8.
                                 
                                 	;--------------------------      (    )
                                 
00001d ef1f                      	ser		r17
00001e bb1b                      	out		PORTA, r17
00001f bb18                      	out		PORTB, r17
000020 bb12                      	out		PORTD, r17
                                 
000021 ba0a                      	out		DDRA, CONST_ZERO
000022 ba07                      	out		DDRB, CONST_ZERO
000023 ba01                      	out		DDRD, CONST_ZERO
                                 
                                 	;---------------------------  USART.   - 8 ,    ,   .
                                 
000024 e01c                      	ldi 	r17, low(bauddivider)
000025 b919                      	out 	UBRRL, r17
000026 e010                      	ldi 	r17, high(bauddivider)
000027 b912                      	out 	UBRRH, r17
                                  
000028 b91b                      	out 	UCSRA, r17
                                  
000029 e918                      	ldi 	r17, (1 << RXEN) | (1 << TXEN) | (1 << RXCIE) | (0 << TXCIE) | (0 << UDRIE) | (0 << UCSZ2) 
00002a b91a                      	out 	UCSRB, r17
                                 	
00002b e016                      	ldi 	r17, (0 << UMSEL0) | (0 << UMSEL1) | (1 << UCSZ0) | (1 << UCSZ1) | (0 << UPM1) | (0 << UPM0) | (0 << USBS) | (0 << UCPOL)
00002c b913                      	out 	UCSRC, r17
                                 
                                 	;--------------------------  
                                 
00002d 988a                      	cbi		DDR_BUTTON, BUTTON
                                 
                                 	;--------------------------  buzzer
                                 
00002e 98c2                      	cbi		PORT_BUZZER, BUZZER
00002f 9aba                      	sbi		DDR_BUZZER, BUZZER
                                 
                                 	;--------------------------   TIM1 A
                                 
000030 e01d                      	ldi		r17, (1 << WGM12) | (1 << CS12) | (0 << CS11) | (1 << CS10) ;    (,  = 1024) 
000031 bd1e                      	out		TCCR1B, r17
                                 
000032 e011                      	ldi		r17, high(kdel1)	;
000033 bd1b                      	out		OCR1AH, r17
000034 ee17                      	ldi		r17, low(kdel1)		 
000035 bd1a                      	out		OCR1AL, r17
                                 
                                 	;--------------------------   TIM0 A
                                 
000036 d123                      	rcall	change_tim0_off
                                 
                                 	;---------------------------    
                                 
000037 e410                      	ldi 	r17, (1 << OCIE1A) | (0 << OCIE0A)
000038 bf19                      	out		TIMSK, r17
                                 
                                 	;---------------------------   INT0  INT1   
                                 
000039 e012                      	ldi		r17, (1 << ISC01) | (0 << ISC00); | (1 << ISC11) | (0 << ISC10) 
00003a bf15                      	out		MCUCR, r17
                                 
00003b e410                      	ldi		r17, (1 << INT0)
00003c bf1b                      	out		GIMSK, r17
                                 
                                 	;--------------------------   
                                 
00003d 2400                      	clr		CONST_ZERO
                                 
00003e e0f0                      	ldi		ZH, 0
00003f e0e2                      	ldi		ZL, 2
                                 
000040 e11d                      	ldi		r17, 29					
000041 2e11                      	mov		r1, r17
                                 
                                 	clear_reg:
000042 941a                      		dec		r1
000043 f011                      		breq	clear_reg_end
000044 9201                      		st		Z+, CONST_ZERO
000045 cffc                      		rjmp	clear_reg
                                 	clear_reg_end:
                                 
000046 27ee                      	clr ZL
                                 
                                 	;--------------------------      
                                 
000047 d0c9                      	rcall	LED_0_test
000048 9478                      	sei
                                 
                                 	;-------------------------- 
                                 
                                 /*	ldi		r17, SERVER_ADDR
                                 	mov		SRC_ADDR, r17
                                 
                                 	ldi		r17, OUR_ADDR
                                 	mov		DST_ADDR, r17
                                 
                                 	ldi		r17, CMD_QUERY
                                 	mov		DATA, r17
                                 
                                 	ldi		STATE, STATE_OK
                                 
                                 	ldi		CONN_STATE, CONNECTED
                                 
                                 	rcall	input_command*/
                                 
                                 	main:	 
000049 cfff                      		rjmp	main
                                 
                                 .include "interrupts.asm"
                                 
                                 ;			 INT0		
                                 ;========================================================
                                 
                                 _INT0:
00004a d095                      	rcall	MCU_wait_200ms
00004b 9982                      	sbic	PIN_BUTTON, BUTTON
00004c 9518                      	reti
                                 
00004d 3050                      	cpi		CONN_STATE, DISCONNECTED
00004e f0b1                      	breq	_INT0_end	
                                 
00004f 3040                      	cpi		STATE, STATE_OK
000050 f049                      	breq	_INT0_send_query
                                 
000051 3041                      	cpi		STATE, STATE_WAITING_RESPONSE
000052 f059                      	breq	_INT0_send_cancel
                                 
000053 3042                      	cpi		STATE, STATE_WAITING_US
000054 f069                      	breq	_INT0_send_response
                                 
000055 3043                      	cpi		STATE, STATE_RECEIVED_RESPONSE
000056 f019                      	breq	_INT0_send_query
                                 
000057 3044                      	cpi		STATE, STATE_ERROR
000058 f009                      	breq	_INT0_send_query
                                 
000059 9518                      	reti
                                 
                                 	_INT0_send_query:
00005a e062                      		ldi		BYTE, CMD_QUERY
00005b d078                      		rcall	USART_send_package
00005c e041                      		ldi		STATE, STATE_WAITING_RESPONSE
                                 
00005d 9518                      		reti
                                 
                                 	_INT0_send_cancel:
00005e e063                      		ldi		BYTE, CMD_CANCEL_QUERY
00005f d074                      		rcall	USART_send_package
000060 e040                      		ldi		STATE, STATE_OK
                                 
000061 9518                      		reti
                                 
                                 	_INT0_send_response:
000062 e064                      		ldi		BYTE, CMD_RESPONSE_TO_QUERY
000063 d070                      		rcall	USART_send_package
000064 e040                      		ldi		STATE, STATE_OK
                                 
                                 	_INT0_end:
                                 
000065 9518                      	reti
                                 
                                 ;========================================================
                                 ;		 UART -  	
                                 ;========================================================
                                 
                                 _UART_RX:
000066 931f                      	push	r17
000067 936f                      	push	BYTE
                                 
000068 b16c                      	in		BYTE, UDR
                                 
000069 1420                      	cp		DST_ADDR, CONST_ZERO			;    DST_ADDR ,     
00006a f049                      	breq	_UART_RX_wait_for_dst_addr_byte
                                 
00006b 1410                      	cp		SRC_ADDR, CONST_ZERO			;    SRC_ADDR ,     
00006c f059                      	breq	_UART_RX_wait_for_src_addr_byte
                                 
00006d 2f16                      	mov		r17, BYTE						;   ,  
00006e 7f10                      	andi	r17, 0xF0
00006f 1510                      	cp		r17, CONST_ZERO
000070 f499                      	brne	_UART_RX_clear_proto			;       
                                 
000071 2e36                      	mov		DATA, BYTE
000072 d039                      	rcall	input_command			
000073 c010                      	rjmp	_UART_RX_clear_proto			;        
                                 
                                 	_UART_RX_wait_for_dst_addr_byte:
000074 3161                      		cpi		BYTE, OUR_ADDR
000075 f471                      		brne	_UART_RX_clear_proto
000076 2e26                      		mov		DST_ADDR, BYTE
                                 
000077 c009                      		rjmp	_UART_RX_end
                                 
                                 	_UART_RX_wait_for_src_addr_byte:
000078 3160                      		cpi		BYTE, SERVER_ADDR
000079 f451                      		brne	_UART_RX_clear_proto		;     , 
                                 
00007a 3161                      		cpi		BYTE, OUR_ADDR
00007b f041                      		breq	_UART_RX_clear_proto		;   , 
                                 
00007c 2f16                      		mov		r17, BYTE
00007d 7f10                      		andi	r17, 0xF0					
00007e 3110                      		cpi		r17, 0x10
00007f f421                      		brne	_UART_RX_clear_proto		;       , 
000080 2e16                      		mov		SRC_ADDR, BYTE
                                 
                                 	_UART_RX_end:
000081 916f                      		pop		BYTE
000082 911f                      		pop		r17
                                 
000083 9518                      	reti
                                 
                                 	_UART_RX_clear_proto:
000084 2411                      		clr		SRC_ADDR
000085 2422                      		clr		DST_ADDR
000086 2433                      		clr		DATA
                                 
000087 cff9                      		rjmp	_UART_RX_end
                                 
                                 ;========================================================
                                 ;			   T1 A	
                                 ;========================================================
                                 
                                 _TIM1_A:
000088 931f                      	push	r17
                                 
000089 d0ae                      	rcall	counter_connection
00008a d0b8                      	rcall	counter_blink
00008b d0c3                      	rcall	counter_ping_send
                                 
00008c 3040                      	cpi		STATE, STATE_OK
00008d f051                      	breq	LED_0_state_connection
                                 
00008e 3041                      	cpi		STATE, STATE_WAITING_RESPONSE
00008f f071                      	breq	LED_0_state_waiting_response
                                 
000090 3042                      	cpi		STATE, STATE_WAITING_US
000091 f081                      	breq	LED_0_state_waiting_us
                                 
000092 3043                      	cpi		STATE, STATE_RECEIVED_RESPONSE
000093 f099                      	breq	LED_0_state_received_response
                                 
                                 	;--------------------------    , 
                                 
000094 e0f1                      	ldi		ZH, high(LED_0_MAGENTA_on)
000095 e0e7                      	ldi		ZL, low(LED_0_MAGENTA_on)
000096 d097                      	rcall	LED_0_toggle
                                 
000097 c012                      	rjmp	LED_0_state_end
                                 
                                 	;--------------------------  ,  
                                 
                                 	LED_0_state_connection:
000098 d05a                      		rcall	LED_0_off
000099 fd50                      		sbrc	CONN_STATE, 0
00009a d063                      		rcall	LED_0_GREEN_on
00009b ff50                      		sbrs	CONN_STATE, 0
00009c d05e                      		rcall	LED_0_RED_on
                                 
00009d c00c                      		rjmp	LED_0_state_end
                                 
                                 	;--------------------------   
                                 
                                 	LED_0_state_waiting_response:
00009e e0f1                      		ldi		ZH, high(LED_0_BLUE_on)
00009f e0e1                      		ldi		ZL, low(LED_0_BLUE_on)
0000a0 d08d                      		rcall	LED_0_toggle
                                 
0000a1 c008                      		rjmp	LED_0_state_end
                                 
                                 	;--------------------------    
                                 
                                 	LED_0_state_waiting_us:
0000a2 e0f0                      		ldi		ZH, high(LED_0_RED_on)
0000a3 efeb                      		ldi		ZL, low(LED_0_RED_on)
0000a4 d0b9                      		rcall	change_tim0_to_buzzer_mode
0000a5 d088                      		rcall	LED_0_toggle
                                 
0000a6 c003                      		rjmp	LED_0_state_end
                                 
                                 	;--------------------------  
                                 
                                 	LED_0_state_received_response:
0000a7 e0f1                      		ldi		ZH, high(LED_0_YELLOW_on)
0000a8 e0e4                      		ldi		ZL, low(LED_0_YELLOW_on)
0000a9 d084                      		rcall	LED_0_toggle
                                 
                                 	LED_0_state_end:
0000aa 911f                      		pop		r17
                                 
0000ab 9518                      	reti
                                 .include "command_and_state.asm"
                                 
                                 ;			   
                                 ;========================================================
                                 
                                 input_command:
0000ac 931f                      	push	r17
                                 
0000ad 2d13                      	mov		r17, DATA
                                 
0000ae 3011                      	cpi		r17, CMD_PING
0000af f049                      	breq	input_command_ping
                                 
0000b0 3051                      	cpi		CONN_STATE, CONNECTED
0000b1 f4d1                      	brne	input_command_end
                                 
0000b2 3012                      	cpi		r17, CMD_QUERY
0000b3 f041                      	breq	input_command_query
                                 
0000b4 3013                      	cpi		r17, CMD_CANCEL_QUERY
0000b5 f079                      	breq	input_command_cancel_query
                                 
0000b6 3014                      	cpi		r17, CMD_RESPONSE_TO_QUERY
0000b7 f089                      	breq	input_command_response_to_request
                                 
0000b8 c013                      	rjmp	input_command_end
                                 
                                 	;--------------------------  
                                 
                                 	input_command_ping:
0000b9 e051                      		ldi		CONN_STATE, CONNECTED
0000ba 2444                      		clr		counter_CONN_STATE
                                 
0000bb c010                      		rjmp	input_command_end
                                 
                                 	;--------------------------  
                                 
                                 	input_command_query:
0000bc 3040                      		cpi		STATE, STATE_OK
0000bd f029                      		breq	input_command_query_ok
0000be 3043                      		cpi		STATE, STATE_RECEIVED_RESPONSE
0000bf f019                      		breq	input_command_query_ok
0000c0 3044                      		cpi		STATE, STATE_ERROR
0000c1 f009                      		breq	input_command_query_ok
                                 
0000c2 c00b                      		rjmp	input_command_error
                                 
                                 		input_command_query_ok:
0000c3 e042                      			ldi		STATE, STATE_WAITING_US
                                 
0000c4 c007                      		rjmp	input_command_end
                                 
                                 	;--------------------------   
                                 
                                 	input_command_cancel_query:
0000c5 3042                      		cpi		STATE, STATE_WAITING_US
0000c6 f439                      		brne	input_command_error
0000c7 e040                      		ldi		STATE, STATE_OK
                                 
0000c8 c003                      		rjmp	input_command_end
                                 
                                 	;--------------------------  
                                 
                                 	input_command_response_to_request:
0000c9 3041                      		cpi		STATE, STATE_WAITING_RESPONSE
0000ca f419                      		brne	input_command_error
                                 
0000cb e043                      		ldi		STATE, STATE_RECEIVED_RESPONSE
                                 
                                 	input_command_end:
0000cc 911f                      		pop		r17
                                 
0000cd 9508                      	ret
                                 
                                 input_command_error:
0000ce e044                      	ldi		STATE, STATE_ERROR
                                 
                                 .include "uart.asm"
0000cf cffc                      
                                 ;		     BYTE
                                 ;========================================================
                                 
                                 USART_Transmit:	
0000d0 9b5d                      	sbis 	UCSRA, UDRE		;     
0000d1 cffe                      	rjmp	USART_Transmit 	;   -  udre
                                  
0000d2 b96c                      	out		UDR, BYTE		;  
                                 
0000d3 9508                      	ret					
                                 
                                 ;========================================================
                                 ;		     
                                 ;				 - BYTE 
                                 ;========================================================
                                 
                                 USART_send_package:
0000d4 936f                      	push	BYTE
                                 
0000d5 e160                      	ldi		BYTE, SERVER_ADDR
0000d6 dff9                      	rcall	USART_Transmit
                                 
0000d7 e161                      	ldi		BYTE, OUR_ADDR
0000d8 dff7                      	rcall	USART_Transmit
                                 
0000d9 916f                      	pop		BYTE
0000da dff5                      	rcall	USART_Transmit
                                 
0000db 9508                      	ret
                                 .include "delay.asm"
                                 
                                 ;			  
                                 ;				    1
                                 ;========================================================
                                 
                                 ;========================================================
                                 ;						10 
                                 ;========================================================
                                 
                                 MCU_wait_10mks:						
0000dc 0000                      	nop
0000dd 0000                      	nop
0000de 0000                      	nop
                                 
0000df 9508                      	ret
                                 
                                 ;========================================================
                                 ;			  
                                 ;				199096  ~ 200 
                                 ;========================================================
                                 
                                 MCU_wait_200ms:						
0000e0 931f                      	push	r17
0000e1 930f                      	push	r16
                                 
0000e2 e31c                      	ldi		r17, 60
0000e3 ef0f                      	ser		r16
                                 
                                 	MCU_wait_200ms_loop_L:
0000e4 dff7                      		rcall	MCU_wait_10mks
0000e5 950a                      		dec		r16
0000e6 f7e9                      		brne	MCU_wait_200ms_loop_L
                                 
                                 	MCU_wait_200ms_loop_H:
0000e7 ef0f                      		ser		r16
0000e8 951a                      		dec		r17
0000e9 f7d1                      		brne	MCU_wait_200ms_loop_L
                                 
0000ea 910f                      	pop		r16
0000eb 911f                      	pop		r17
                                 
0000ec 9508                      	ret
                                 
                                 ;========================================================
                                 ;			  
                                 ;				995 487  ~ 1 .
                                 ;========================================================
                                 MCU_wait_1000ms:
0000ed dff2                      	rcall	MCU_wait_200ms
0000ee dff1                      	rcall	MCU_wait_200ms
0000ef dff0                      	rcall	MCU_wait_200ms
0000f0 dfef                      	rcall	MCU_wait_200ms
0000f1 dfee                      	rcall	MCU_wait_200ms
                                 
0000f2 9508                      	ret
                                 
                                 .include "led.asm"
                                 
                                 ;			  LED RGB
                                 ;========================================================
                                 
                                 LED_0_off:
0000f3 d066                      	rcall	change_tim0_off
                                 
0000f4 98bd                      	cbi		DDR_LED_0, RED_LED_0
0000f5 98bf                      	cbi		DDR_LED_0, BLUE_LED_0
0000f6 98be                      	cbi		DDR_LED_0, GREEN_LED_0
                                 
0000f7 9ac5                      	sbi		PORT_LED_0, RED_LED_0
0000f8 9ac7                      	sbi		PORT_LED_0, BLUE_LED_0
0000f9 9ac6                      	sbi		PORT_LED_0, GREEN_LED_0
                                 
                                 	;rcall	MCU_wait_10mks
                                 
0000fa 9508                      	ret
                                 
                                 LED_0_RED_on:
0000fb 9abd                      	sbi		DDR_LED_0, RED_LED_0
0000fc 98c5                      	cbi		PORT_LED_0, RED_LED_0
                                 
0000fd 9508                      	ret
                                 
                                 LED_0_GREEN_on:
0000fe 9abe                      	sbi		DDR_LED_0, GREEN_LED_0
0000ff 98c6                      	cbi		PORT_LED_0, GREEN_LED_0
                                 
000100 9508                      	ret
                                 
                                 LED_0_BLUE_on:
000101 9abf                      	sbi		DDR_LED_0, BLUE_LED_0
000102 98c7                      	cbi		PORT_LED_0, BLUE_LED_0
                                 
000103 9508                      	ret
                                 
                                 LED_0_YELLOW_on:
000104 dff6                      	rcall	LED_0_RED_on
000105 dff8                      	rcall	LED_0_GREEN_on
                                 
000106 9508                      	ret
                                 
                                 LED_0_MAGENTA_on:
000107 dff3                      	rcall	LED_0_RED_on
000108 dff8                      	rcall	LED_0_BLUE_on
                                 
000109 9508                      	ret
                                 
                                 LED_0_WHITE_BLUE_on:
00010a dff3                      	rcall	LED_0_GREEN_on
00010b dff5                      	rcall	LED_0_BLUE_on
                                 
00010c 9508                      	ret
                                 
                                 LED_0_WHITE_on:
00010d dfed                      	rcall	LED_0_RED_on
00010e dfef                      	rcall	LED_0_GREEN_on
00010f dff1                      	rcall	LED_0_BLUE_on
                                 
000110 9508                      	ret
                                 
                                 ;========================================================
                                 ;					 LED_0
                                 ;========================================================
                                 
                                 LED_0_test:
000111 d016                      	rcall	LED_0_test_ext1
000112 dfe8                      	rcall	LED_0_RED_on
000113 d017                      	rcall	LED_0_test_ext2
                                 
000114 d013                      	rcall	LED_0_test_ext1
000115 dfe8                      	rcall	LED_0_GREEN_on
000116 d014                      	rcall	LED_0_test_ext2
                                 
000117 d010                      	rcall	LED_0_test_ext1
000118 dfe8                      	rcall	LED_0_BLUE_on
000119 d011                      	rcall	LED_0_test_ext2
                                 
00011a d00d                      	rcall	LED_0_test_ext1
00011b dfe8                      	rcall	LED_0_YELLOW_on
00011c d00e                      	rcall	LED_0_test_ext2
                                 
00011d d00a                      	rcall	LED_0_test_ext1
00011e dfe8                      	rcall	LED_0_MAGENTA_on
00011f d00b                      	rcall	LED_0_test_ext2
                                 
000120 d007                      	rcall	LED_0_test_ext1
000121 dfe8                      	rcall	LED_0_WHITE_BLUE_on
000122 d008                      	rcall	LED_0_test_ext2
                                 
000123 d004                      	rcall	LED_0_test_ext1
000124 dfe8                      	rcall	LED_0_WHITE_on
000125 d005                      	rcall	LED_0_test_ext2
                                 
000126 dfcc                      	rcall	LED_0_off
                                 
000127 9508                      	ret
                                 
                                 LED_0_test_ext1:
000128 dfca                      	rcall	LED_0_off
000129 dfc3                      	rcall	MCU_wait_1000ms
                                 
00012a 9508                      	ret
                                 
                                 LED_0_test_ext2:
00012b d032                      	rcall	change_tim0_to_buzzer_mode
00012c dfc0                      	rcall	MCU_wait_1000ms
                                 
00012d 9508                      	ret
                                 
                                 ;========================================================
                                 ;	 LED_0   .
                                 ;	: Z -     LED_0
                                 ;========================================================
                                 
                                 LED_0_toggle:
00012e 931f                      	push	r17
                                 
00012f b317                      	in		r17, DDR_LED_0
000130 7e10                      	andi	r17, 0xE0
000131 3010                      	cpi		r17, 0x00
000132 f011                      	breq	LED_0_toggle_enable
                                 
000133 dfbf                      	rcall	LED_0_off
                                 
000134 cf75                      	rjmp	LED_0_state_end
                                 
                                 	LED_0_toggle_enable:
000135 9509                      		icall
                                 
                                 	LED_0_toggle_end:
000136 911f                      		pop		r17
                                 		
                                 .include "counter.asm"
000137 9508                      
                                 ;		\    
                                 ;				 		
                                 ;========================================================
                                 
                                 counter_connection:
000138 931f                      	push	r17
000139 9443                      	inc		counter_CONN_STATE
00013a 2d14                      	mov		r17, counter_CONN_STATE
00013b 3114                      	cpi		r17, 20
00013c f408                      	brsh	counter_connection_clear
00013d c003                      	rjmp	counter_connection_end
                                 
                                 	counter_connection_clear:
00013e 2444                      		clr		counter_CONN_STATE
00013f e050                      		ldi		CONN_STATE, DISCONNECTED
000140 e040                      		ldi		STATE, STATE_OK
                                 
                                 	counter_connection_end:
000141 911f                      		pop		r17
                                 
000142 9508                      	ret
                                 
                                 ;========================================================
                                 ;		\    
                                 ;				  led		
                                 ;========================================================
                                 
                                 counter_blink:
000143 931f                      	push	r17
                                 
000144 3043                      	cpi		STATE, STATE_RECEIVED_RESPONSE
000145 f439                      	brne	counter_blink_end
                                 
000146 9453                      	inc		counter_BLINK_TIME
000147 2d15                      	mov		r17, counter_BLINK_TIME
000148 3114                      	cpi		r17, 20
000149 f408                      	brsh	counter_blink_clear
00014a c002                      	rjmp	counter_blink_end
                                 
                                 	counter_blink_clear:
00014b 2455                      		clr		counter_BLINK_TIME
00014c e040                      		ldi		STATE, STATE_OK
                                 
                                 	counter_blink_end:
00014d 911f                      		pop		r17
                                 
00014e 9508                      	ret
                                 
                                 ;========================================================
                                 ;			\   
                                 ;				 PING		
                                 ;========================================================
                                 
                                 counter_ping_send:
00014f 931f                      	push	r17
                                 
000150 9463                      	inc		counter_PING
000151 2d16                      	mov		r17, counter_PING
000152 301a                      	cpi		r17, 10
000153 f408                      	brsh	counter_ping_send_clear
                                 
000154 c003                      	rjmp	counter_ping_send_end
                                 
                                 	counter_ping_send_clear:
000155 2466                      		clr		counter_PING
000156 e061                      		ldi		BYTE, CMD_PING
000157 df7c                      		rcall	USART_send_package
                                 
                                 	counter_ping_send_end:
000158 911f                      		pop		r17
                                 
                                 .include "tim0.asm"
000159 9508                      
                                 ;		  TIM0
                                 ;========================================================
                                 
                                 change_tim0_off:
00015a be00                      	out		TCCR0A, CONST_ZERO
00015b be03                      	out		TCCR0B, CONST_ZERO
00015c be06                      	out		OCR0A, CONST_ZERO
                                 
00015d 9508                      	ret
                                 
                                 ;========================================================
                                 ;		  TIM0
                                 ;========================================================
                                 
                                 change_tim0_to_buzzer_mode:
00015e 931f                      	push	r17
                                 
00015f e412                      	ldi		r17, (1 << WGM01) | (0 << COM0A1) | (1 << COM0A0)		
000160 bf10                      	out		TCCR0A, r17
000161 e012                      	ldi		r17, (0 << CS02) | (1 << CS01) | (0 << CS00) 
000162 bf13                      	out		TCCR0B, r17
000163 e71d                      	ldi		r17, kdel4
000164 bf16                      	out		OCR0A, r17
                                 
000165 911f                      	pop		r17
                                 


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATtiny2313A" register use summary:
x  :   0 y  :   0 z  :   1 r0 :  11 r1 :   5 r2 :   3 r3 :   3 r4 :   4 
r5 :   3 r6 :   3 r7 :   0 r8 :   0 r9 :   0 r10:   0 r11:   0 r12:   0 
r13:   0 r14:   0 r15:   0 r16:   5 r17:  81 r18:   0 r19:   0 r20:  24 
r21:   6 r22:  20 r23:   0 r24:   0 r25:   0 r26:   0 r27:   0 r28:   0 
r29:   0 r30:   6 r31:   5 
Registers used: 15 out of 35 (42.9%)

"ATtiny2313A" instruction use summary:
.lds  :   0 .sts  :   0 adc   :   0 add   :   0 adiw  :   0 and   :   0 
andi  :   3 asr   :   0 bclr  :   0 bld   :   0 brbc  :   0 brbs  :   0 
brcc  :   0 brcs  :   0 break :   0 breq  :  22 brge  :   0 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :   0 brlt  :   0 brmi  :   0 
brne  :  10 brpl  :   0 brsh  :   3 brtc  :   0 brts  :   0 brvc  :   0 
brvs  :   0 bset  :   0 bst   :   0 cbi   :   8 cbr   :   0 clc   :   0 
clh   :   0 cli   :   0 cln   :   0 clr   :   9 cls   :   0 clt   :   0 
clv   :   0 clz   :   0 com   :   0 cp    :   3 cpc   :   0 cpi   :  29 
cpse  :   0 dec   :   3 eor   :   0 icall :   1 ijmp  :   0 in    :   2 
inc   :   3 ld    :   0 ldd   :   0 ldi   :  46 lds   :   0 lpm   :   0 
lsl   :   0 lsr   :   0 mov   :  10 movw  :   0 neg   :   0 nop   :   3 
or    :   0 ori   :   0 out   :  28 pop   :  12 push  :  12 rcall :  65 
ret   :  23 reti  :  24 rjmp  :  24 rol   :   0 ror   :   0 sbc   :   0 
sbci  :   0 sbi   :   7 sbic  :   1 sbis  :   1 sbiw  :   0 sbr   :   0 
sbrc  :   1 sbrs  :   1 sec   :   0 seh   :   0 sei   :   1 sen   :   0 
ser   :   3 ses   :   0 set   :   0 sev   :   0 sez   :   0 sleep :   0 
spm   :   0 st    :   1 std   :   0 sts   :   0 sub   :   0 subi  :   0 
swap  :   0 tst   :   0 wdr   :   0 
Instructions used: 30 out of 105 (28.6%)

"ATtiny2313A" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x0002ce    718      0    718    2048  35.1%
[.dseg] 0x000060 0x000060      0      0      0     128   0.0%
[.eseg] 0x000000 0x000000      0      0      0     128   0.0%

Assembly complete, 0 errors, 0 warnings
